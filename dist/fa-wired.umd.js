!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).FaWired=t()}(this,(function(){"use strict";
/*!
 * fa-wired v1.0.0
 * Fathom Analytics Alpine.js wrapper for Laravel/Livewire
 * (c) 2025 kerkness
 * Released under the MIT License
 * https://github.com/kerkness/fa-wired
 */
/*!
   * fa-wired - Fathom Analytics Alpine.js wrapper for Laravel/Livewire
   * https://github.com/kerkness/fa-wired
   */const e="1.0.0",t={version:e,buildDate:"2025-05-29T16:01:45.690Z",init(){"undefined"!=typeof document?("undefined"!=typeof Alpine?this.initializeAlpine():document.addEventListener("alpine:init",(()=>{this.initializeAlpine()})),"undefined"!=typeof Livewire?this.initializeLivewire():document.addEventListener("livewire:init",(()=>{this.initializeLivewire()})),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{this.initializeAutoTracking()})):this.initializeAutoTracking()):console.warn("fa-wired: Document not available, skipping initialization")},initializeAlpine(){Alpine.store("fathom",{track(e,t=null){if("undefined"==typeof fathom)return void console.warn("fa-wired: Fathom Analytics not loaded");const i=t?{_value:t}:{};fathom.trackEvent(e,i)},click(e,t=null){this.track(e,t)},submit(e,t=null){this.track(e,t)},conversion(e,t){this.track(e,t)},download(e,t=null){const i=t||`file download: ${e}`;this.track(i)},externalLink(e,t=null){const i=t||`external link: ${e}`;this.track(i)}}),Alpine.magic("fathom",(()=>Alpine.store("fathom")));const e=(e,t)=>{let i,n=null;if(e.trim().startsWith("{")&&e.trim().endsWith("}"))try{const o=t(e);"object"==typeof o&&null!==o?(i=o.event,n=o.value||null):i=e}catch(o){i=e}else if(e.trim().startsWith("'")&&e.trim().endsWith("'")||e.trim().startsWith('"')&&e.trim().endsWith('"'))try{i=t(e)}catch(o){i=e}else i=e;return{eventName:i,value:n}};Alpine.directive("track-click",((t,{expression:i},{evaluate:n})=>{const{eventName:o,value:a}=e(i,n);t.addEventListener("click",(()=>{Alpine.store("fathom").click(o,a)}))})),Alpine.directive("track-submit",((t,{expression:i},{evaluate:n})=>{const{eventName:o,value:a}=e(i,n);t.addEventListener("submit",(()=>{Alpine.store("fathom").submit(o,a)}))})),Alpine.directive("track-download",((t,{expression:i},{evaluate:n})=>{let o=null;if(i){const{eventName:t}=e(i,n);o=t}else o=null;t.addEventListener("click",(e=>{const i=t.getAttribute("href"),n=i?i.split("/").pop():"unknown";Alpine.store("fathom").download(n,o)}))})),Alpine.directive("track-external",((t,{expression:i},{evaluate:n})=>{const{eventName:o}=e(i,n);t.addEventListener("click",(e=>{const i=t.getAttribute("href");Alpine.store("fathom").externalLink(i,o)}))}))},initializeLivewire(){Livewire.on("fathom-track",(e=>{Alpine.store("fathom").track(e.name,e.value||null)})),Livewire.on("fathom-form-submit",(e=>{Alpine.store("fathom").submit(e.name,e.value||null)})),Livewire.on("fathom-conversion",(e=>{Alpine.store("fathom").conversion(e.name,e.value)}))},initializeAutoTracking(){var e,t;(null==(e=this.config)?void 0:e.autoTrackExternalLinks)&&document.querySelectorAll('a[href^="http"]:not([href*="'+window.location.hostname+'"])').forEach((e=>{e.addEventListener("click",(()=>{Alpine.store("fathom").externalLink(e.href)}))})),(null==(t=this.config)?void 0:t.autoTrackDownloads)&&document.querySelectorAll('a[href$=".pdf"], a[href$=".doc"], a[href$=".docx"], a[href$=".xls"], a[href$=".xlsx"]').forEach((e=>{e.addEventListener("click",(()=>{const t=e.href.split("/").pop();Alpine.store("fathom").download(t)}))}))},config:{autoTrackExternalLinks:!1,autoTrackDownloads:!1},configure(e){this.config={...this.config,...e}}};return"undefined"!=typeof window&&(window.FaWired=t,t.init(),"development"===process.env.NODE_ENV&&console.log(`fa-wired v${e} initialized`)),t}));
//# sourceMappingURL=fa-wired.umd.js.map
